# 有村昆の民泊塾 - 民泊投資収益シミュレーター システム仕様書

## 1. 機能仕様

### 1.1 シミュレーション機能

#### 1.1.1 地域選択
**対応地域一覧:**

| 地域名 | 平均稼働率 | 平均単価 | 説明 |
|-------|-----------|---------|------|
| 東京都 | 70% | ¥25,000 | 活気ある首都 |
| 大阪府 | 68% | ¥20,000 | 関西の中心地 |
| 京都府 | 65% | ¥22,000 | 歴史的な観光地 |
| 福岡県 | 60% | ¥18,000 | 九州の玄関口 |
| 沖縄県 | 62% | ¥20,000 | リゾート地 |
| 北海道 | 55% | ¥15,000 | 自然豊かな観光地 |
| その他地方 | 40% | ¥10,000 | 地方都市 |

#### 1.1.2 物件タイプ選択
**対応物件タイプ:**

| タイプ | 最大宿泊人数 | 想定面積 |
|-------|-------------|---------|
| 1K | 最大2名まで | 20-25㎡ |
| 1DK | 最大2名まで | 25-30㎡ |
| 1LDK | 最大3名まで | 35-40㎡ |
| 2LDK | 最大4名まで | 45-55㎡ |
| 3LDK | 最大6名まで | 60-70㎡ |
| 戸建て | 最大8名まで | 80-120㎡ |

#### 1.1.3 収益計算ロジック

**年間売上計算:**
```
年間売上 = 平均単価 × 平均稼働率 × 365日
```

**年間費用計算:**
```
年間費用 = 月額家賃 × 12 + 光熱費・保険料等 + 運営代行費
- 光熱費・保険料等: 月額家賃の15%
- 運営代行費: 売上の指定%（デフォルト10%）
```

**年間利益・利回り計算:**
```
年間利益 = 年間売上 - 年間費用
年間利回り = (年間利益 / 総初期費用) × 100
```

**総初期費用:**
```
総初期費用 = 初期費用 + 家具・家電費用 + リフォーム費用
```

### 1.2 LINE Bot機能仕様

#### 1.2.1 友だち追加時の動作
**送信メッセージ:**
```
🏠 有村昆の民泊塾へようこそ！

民泊投資のプロフェッショナルがあなたの投資をサポートします。

📊 シミュレーション結果を確認するには「結果」と送信してください。

💡 その他のご質問もお気軽にどうぞ！
```

#### 1.2.2 「結果」コマンド処理
**処理フロー:**
1. ユーザーから「結果」メッセージを受信
2. データベースから最新のシミュレーション結果を取得
3. OpenAI APIを使用して詳細分析を生成
4. 分析結果をLINEメッセージとして送信

**OpenAI プロンプト仕様:**
```
あなたは民泊投資の専門家です。以下のシミュレーション結果を分析し、
投資判断に役立つ詳細なアドバイスを提供してください。

シミュレーション結果:
- 地域: {region}
- 物件タイプ: {propertyType}
- 年間売上: {annualRevenue}円
- 年間費用: {annualCost}円
- 年間利益: {annualProfit}円
- 年間利回り: {roi}%

以下の観点から分析してください:
1. 投資収益性の評価
2. リスク要因の分析
3. 改善提案
4. 市場動向との比較
```

#### 1.2.3 その他メッセージ処理
**デフォルト返信:**
```
📞 お問い合わせありがとうございます！

🔍 シミュレーション結果を確認するには「結果」と送信してください。

📋 その他のご質問については、有村昆までお気軽にお問い合わせください。

🌐 Webサイト: [URL]
```

### 1.3 UI/UX仕様

#### 1.3.1 レスポンシブデザイン
**ブレークポイント:**
- デスクトップ: 1024px以上
- タブレット: 768px - 1023px
- モバイル: 767px以下

#### 1.3.2 カラーパレット
- **プライマリ**: #00C300 (LINE Green)
- **セカンダリ**: #4285F4 (Blue)
- **アクセント**: #FF6B6B (Red)
- **背景**: #F8F9FA (Light Gray)
- **テキスト**: #333333 (Dark Gray)

#### 1.3.3 フォント
- **日本語**: 'Noto Sans JP', sans-serif
- **英数字**: 'Roboto', sans-serif

### 1.4 データ検証仕様

#### 1.4.1 入力値検証
**月額家賃:**
- 最小値: 10,000円
- 最大値: 1,000,000円
- データ型: 整数

**初期費用:**
- 最小値: 100,000円
- 最大値: 50,000,000円
- データ型: 整数

**運営代行費率:**
- 最小値: 0%
- 最大値: 50%
- データ型: 小数点第2位まで

## 2. 非機能仕様

### 2.1 パフォーマンス要件
- **ページ読み込み時間**: 3秒以内
- **シミュレーション処理時間**: 2秒以内
- **LINE Bot応答時間**: 5秒以内
- **同時接続数**: 100ユーザー

### 2.2 可用性要件
- **稼働率**: 99.5%以上
- **メンテナンス時間**: 月1回、最大2時間

### 2.3 セキュリティ要件
- **データ暗号化**: TLS 1.2以上
- **認証**: LINE Platform認証
- **入力値検証**: 全入力項目でサニタイズ実施

### 2.4 互換性要件
**対応ブラウザ:**
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

**対応デバイス:**
- iOS 13+
- Android 8+

## 3. 運用仕様

### 3.1 ログ仕様
**ログレベル:**
- ERROR: エラー情報
- WARN: 警告情報
- INFO: 一般情報
- DEBUG: デバッグ情報

**ログ出力項目:**
- タイムスタンプ
- ログレベル
- メッセージ
- ユーザーID（該当する場合）
- IPアドレス

### 3.2 バックアップ仕様
- **データベース**: 日次自動バックアップ
- **保存期間**: 30日間
- **復旧時間**: 1時間以内

### 3.3 監視仕様
**監視項目:**
- サーバー稼働状況
- データベース接続
- 外部API応答時間
- エラー発生率

**アラート条件:**
- サーバーダウン: 即座
- 応答時間5秒超過: 3回連続
- エラー率5%超過: 10分間継続

## 4. 変更履歴

| バージョン | 日付 | 変更内容 | 担当者 |
|-----------|------|---------|-------|
| 1.0 | 2025-09-22 | 初版作成 | Manus AI |

---

**承認者**: 有村昆  
**最終更新**: 2025年9月22日  
**次回レビュー予定**: 2025年10月22日
